<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Routing &mdash; Zend Framework 2 2.3.0dev documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.3.0dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Zend Framework 2 2.3.0dev documentation" href="../index.html" />
    <link rel="next" title="The MvcEvent" href="zend.mvc.mvc-event.html" />
    <link rel="prev" title="Default Services" href="zend.mvc.services.html" />
<style type="text/css">
    /* Styles for floating Edit on GitHub box */
    #editor-trap {
        padding: 1em;
        border: 1px solid white;
        width: 250px;

        display: none;
        color: white;
        background: #3f454b;
        position: fixed;
        bottom: 5px;
        left: 175px;
        font-size: 85%;
        text-align: left;
        z-index: 2;

        box-shadow: 0 4px 6px #333;
        -moz-box-shadow: 0 4px 6px #333;
        -webkit-box-shadow: 0 4px 6px #333;
        
        cursor: pointer;
    }

    #editor-trap h3 {
        margin: 0 0 0.5em 0;
        padding: 0;
    }

    #editor-trap h3 > span {
        padding: 0 6px;
        border: solid white;
        border-width: 0 1px 4px 1px;
        font-size: 10px;
    }

    #editor-trap a {
        color: #98DBCC;
    }

    #editor-trap ol {
        margin: 0;
        padding: 0 0 0 2em;
    }

    /* Hide trick */
    #editor-trap.toggled > * {
        display: none;
    }


    #editor-trap.toggled > h3 {
        display: block;
    }

    #editor-trap.toggled > h3 > span {
        border-width: 6px 1px 0 1px;
    }
    
    #edit-button {
        position: fixed;
        bottom: 5px;
        left: 5px;
        z-index: 2;
        width: 162px;
        height: 42px;
    }
</style>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="zend.mvc.mvc-event.html" title="The MvcEvent"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="zend.mvc.services.html" title="Default Services"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Zend Framework 2 2.3.0dev documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="routing">
<span id="zend-mvc-routing"></span><h1>Routing<a class="headerlink" href="#routing" title="Permalink to this headline">Â¶</a></h1>
<p>Routing is the act of matching a request to a given controller.</p>
<p>Typically, routing will examine the request URI, and attempt to match the URI path segment against provided
constraints. If the constraints match, a set of &#8220;matches&#8221; are returned, one of which should be the controller name
to execute. Routing can utilize other portions of the request URI or environment as well &#8211; for example, the host
or scheme, query parameters, headers, request method, and more.</p>
<p>Routing has been written from the ground up for Zend Framework 2.0. Execution is quite similar, but the internal
workings are more consistent, performant, and often simpler.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you are a developer with knowledge of the routing system in Zend Framework 1.x, you should know that some of
the old terminology does not apply in Zend Framework 2.x. In the new routing system we don&#8217;t have a router as
such, as every route can match and assemble URIs by themselves, which makes them routers, too.</p>
<p class="last">That said, in most cases the developer does not need to worry about this, because Zend Framework 2.x will take
care of this &#8220;under the hood&#8221;. The work of the router will be done by <tt class="docutils literal"><span class="pre">Zend\Mvc\Router\SimpleRouteStack</span></tt>
or <tt class="docutils literal"><span class="pre">Zend\Mvc\Router\Http\TreeRouteStack</span></tt>.</p>
</div>
<p>The base unit of routing is a <tt class="docutils literal"><span class="pre">Route</span></tt>:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">Zend\Mvc\Router</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Zend\Stdlib\RequestInterface</span> <span class="k">as</span> <span class="nx">Request</span><span class="p">;</span>

<span class="k">interface</span> <span class="nx">RouteInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">factory</span><span class="p">(</span><span class="k">array</span> <span class="nv">$options</span> <span class="o">=</span> <span class="k">array</span><span class="p">());</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">match</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">assemble</span><span class="p">(</span><span class="k">array</span> <span class="nv">$params</span> <span class="o">=</span> <span class="k">array</span><span class="p">(),</span> <span class="k">array</span> <span class="nv">$options</span> <span class="o">=</span> <span class="k">array</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>A <tt class="docutils literal"><span class="pre">Route</span></tt> accepts a <tt class="docutils literal"><span class="pre">Request</span></tt>, and determines if it matches. If so, it returns a <tt class="docutils literal"><span class="pre">RouteMatch</span></tt> object:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">Zend\Mvc\Router</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">RouteMatch</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="k">array</span> <span class="nv">$params</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setMatchedRouteName</span><span class="p">(</span><span class="nv">$name</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getMatchedRouteName</span><span class="p">();</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setParam</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$value</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getParams</span><span class="p">();</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getParam</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$default</span> <span class="o">=</span> <span class="k">null</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Typically, when a <tt class="docutils literal"><span class="pre">Route</span></tt> matches, it will define one or more parameters. These are passed into the
<tt class="docutils literal"><span class="pre">RouteMatch</span></tt>, and objects may query the <tt class="docutils literal"><span class="pre">RouteMatch</span></tt> for their values.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$id</span> <span class="o">=</span> <span class="nv">$routeMatch</span><span class="o">-&gt;</span><span class="na">getParam</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s1">&#39;Required identifier is missing!&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="nv">$entity</span> <span class="o">=</span> <span class="nv">$resource</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>Usually you will have multiple routes you wish to test against. In order to facilitate this, you will use a route
aggregate, usually implementing <tt class="docutils literal"><span class="pre">RouteStack</span></tt>:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">namespace</span> <span class="nx">Zend\Mvc\Router</span><span class="p">;</span>

<span class="k">interface</span> <span class="nx">RouteStackInterface</span> <span class="k">extends</span> <span class="nx">RouteInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">addRoute</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$route</span><span class="p">,</span> <span class="nv">$priority</span> <span class="o">=</span> <span class="k">null</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">addRoutes</span><span class="p">(</span><span class="k">array</span> <span class="nv">$routes</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">removeRoute</span><span class="p">(</span><span class="nv">$name</span><span class="p">);</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setRoutes</span><span class="p">(</span><span class="k">array</span> <span class="nv">$routes</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Typically, routes should be queried in a LIFO order, and hence the reason behind the name <tt class="docutils literal"><span class="pre">RouteStack</span></tt>. Zend
Framework provides two implementations of this interface, <tt class="docutils literal"><span class="pre">SimpleRouteStack</span></tt> and <tt class="docutils literal"><span class="pre">TreeRouteStack</span></tt>. In each, you
register routes either one at a time using <tt class="docutils literal"><span class="pre">addRoute()</span></tt>, or in bulk using <tt class="docutils literal"><span class="pre">addRoutes()</span></tt>.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// One at a time:</span>
<span class="nv">$route</span> <span class="o">=</span> <span class="nx">Literal</span><span class="o">::</span><span class="na">factory</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/foo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;foo-index&#39;</span><span class="p">,</span>
        <span class="s1">&#39;action&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">));</span>
<span class="nv">$router</span><span class="o">-&gt;</span><span class="na">addRoute</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="nv">$route</span><span class="p">);</span>

<span class="c1">// In bulk:</span>
<span class="nv">$router</span><span class="o">-&gt;</span><span class="na">addRoutes</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="c1">// using already instantiated routes:</span>
    <span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="nv">$route</span><span class="p">,</span>

    <span class="c1">// providing configuration to allow lazy-loading routes:</span>
    <span class="s1">&#39;bar&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;literal&#39;</span><span class="p">,</span>
        <span class="s1">&#39;options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/bar&#39;</span><span class="p">,</span>
            <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar-index&#39;</span><span class="p">,</span>
                <span class="s1">&#39;action&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="router-types">
<span id="zend-mvc-routing-router-types"></span><h2>Router Types<a class="headerlink" href="#router-types" title="Permalink to this headline">Â¶</a></h2>
<p>Two routers are provided, the <tt class="docutils literal"><span class="pre">SimpleRouteStack</span></tt> and <tt class="docutils literal"><span class="pre">TreeRouteStack</span></tt>. Each works with the above interface, but
utilize slightly different options and execution paths. By default, the <tt class="docutils literal"><span class="pre">Zend\Mvc</span></tt> uses the <tt class="docutils literal"><span class="pre">TreeRouteStack</span></tt> as
the router.</p>
<div class="section" id="simpleroutestack">
<span id="zend-mvc-routing-router-types-simple-route-stack"></span><h3>SimpleRouteStack<a class="headerlink" href="#simpleroutestack" title="Permalink to this headline">Â¶</a></h3>
<p>This router simply takes individual routes that provide their full matching logic in one go, and loops through them
in LIFO order until a match is found. As such, routes that will match most often should be registered last, and
least common routes first. Additionally, you will need to ensure that routes that potentially overlap are
registered such that the most specific match will match first (i.e., register later). Alternatively, you can set
priorities by giving the priority as third parameter to the <tt class="docutils literal"><span class="pre">addRoute()</span></tt> method, specifying the priority in the
route specifications or setting the priority property within a route instance before adding it to the route stack.</p>
</div>
<div class="section" id="treeroutestack">
<span id="zend-mvc-routing-router-types-tree-route-stack"></span><h3>TreeRouteStack<a class="headerlink" href="#treeroutestack" title="Permalink to this headline">Â¶</a></h3>
<p><tt class="docutils literal"><span class="pre">Zend\Mvc\Router\Http\TreeRouteStack</span></tt> provides the ability to register trees of routes, and will use a B-tree
algorithm to match routes. As such, you register a single route with many children.</p>
<p>A <tt class="docutils literal"><span class="pre">TreeRouteStack</span></tt> will consist of the following configuration:</p>
<ul class="simple">
<li>A base &#8220;route&#8221;, which describes the base match needed, the root of the tree.</li>
<li>An optional &#8220;route_plugins&#8221;, which is a configured <tt class="docutils literal"><span class="pre">Zend\Mvc\Router\RoutePluginManager</span></tt> that can lazy-load
routes.</li>
<li>The option &#8220;may_terminate&#8221;, which hints to the router that no other segments will follow it.</li>
<li>An optional &#8220;child_routes&#8221; array, which contains additional routes that stem from the base &#8220;route&#8221; (i.e., build
from it). Each child route can itself be a <tt class="docutils literal"><span class="pre">TreeRouteStack</span></tt> if desired; in fact, the <tt class="docutils literal"><span class="pre">Part</span></tt> route works
exactly this way.</li>
</ul>
<p>When a route matches against a <tt class="docutils literal"><span class="pre">TreeRouteStack</span></tt>, the matched parameters from each segment of the tree will be
returned.</p>
<p>A <tt class="docutils literal"><span class="pre">TreeRouteStack</span></tt> can be your sole route for your application, or describe particular path segments of the
application.</p>
<p>An example of a <tt class="docutils literal"><span class="pre">TreeRouteStack</span></tt> is provided in the documentation of the <tt class="docutils literal"><span class="pre">Part</span></tt> route.</p>
</div>
</div>
<div class="section" id="http-route-types">
<span id="zend-mvc-routing-http-route-types"></span><h2>HTTP Route Types<a class="headerlink" href="#http-route-types" title="Permalink to this headline">Â¶</a></h2>
<p>Zend Framework 2.0 ships with the following HTTP route types.</p>
<div class="section" id="zend-mvc-router-http-hostname">
<span id="zend-mvc-routing-http-route-types-hostname"></span><h3>Zend\Mvc\Router\Http\Hostname<a class="headerlink" href="#zend-mvc-router-http-hostname" title="Permalink to this headline">Â¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">Hostname</span></tt> route attempts to match the hostname registered in the request against specific criteria.
Typically, this will be in one of the following forms:</p>
<ul class="simple">
<li>&#8220;subdomain.domain.tld&#8221;</li>
<li>&#8221;:subdomain.domain.tld&#8221;</li>
</ul>
<p>In the above, the second route would return a &#8220;subdomain&#8221; key as part of the route match.</p>
<p>For any given hostname segment, you may also provide a constraint. As an example, if the &#8220;subdomain&#8221; segment needed
to match only if it started with &#8220;fw&#8221; and contained exactly 2 digits following, the following route would be
needed:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$route</span> <span class="o">=</span> <span class="nx">Hostname</span><span class="o">::</span><span class="na">factory</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;:subdomain.domain.tld&#39;</span><span class="p">,</span>
    <span class="s1">&#39;constraints&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;subdomain&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;fw\d{2}&#39;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</td></tr></table></div>
<p>In the above example, only a &#8220;subdomain&#8221; key will be returned in the <tt class="docutils literal"><span class="pre">RouteMatch</span></tt>. If you wanted to also provide
other information based on matching, or a default value to return for the subdomain, you need to also provide
defaults.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$route</span> <span class="o">=</span> <span class="nx">Hostname</span><span class="o">::</span><span class="na">factory</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;:subdomain.domain.tld&#39;</span><span class="p">,</span>
    <span class="s1">&#39;constraints&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;subdomain&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;fw\d{2}&#39;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</td></tr></table></div>
<p>When matched, the above will return two keys in the <tt class="docutils literal"><span class="pre">RouteMatch</span></tt>, &#8220;subdomain&#8221; and &#8220;type&#8221;.</p>
</div>
<div class="section" id="zend-mvc-router-http-literal">
<span id="zend-mvc-routing-http-route-types-literal"></span><h3>Zend\Mvc\Router\Http\Literal<a class="headerlink" href="#zend-mvc-router-http-literal" title="Permalink to this headline">Â¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">Literal</span></tt> route is for doing exact matching of the URI path. Configuration therefore is solely the path you
want to match, and the &#8220;defaults&#8221;, or parameters you want returned on a match.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$route</span> <span class="o">=</span> <span class="nx">Literal</span><span class="o">::</span><span class="na">factory</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/foo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Application\Controller\IndexController&#39;</span><span class="p">,</span>
        <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</td></tr></table></div>
<p>The above route would match a path &#8220;/foo&#8221;, and return the key &#8220;action&#8221; in the <tt class="docutils literal"><span class="pre">RouteMatch</span></tt>, with the value
&#8220;foo&#8221;.</p>
</div>
<div class="section" id="zend-mvc-router-http-method">
<span id="zend-mvc-routing-http-route-types-method"></span><h3>Zend\Mvc\Router\Http\Method<a class="headerlink" href="#zend-mvc-router-http-method" title="Permalink to this headline">Â¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">Method</span></tt> route is used to match the http method or &#8216;verb&#8217; specified in the request (See RFC 2616 Sec. 5.1.1).
It can optionally be configured to match against multiple methods by providing a comma-separated list of method
tokens.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$route</span> <span class="o">=</span> <span class="nx">Method</span><span class="o">::</span><span class="na">factory</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;verb&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post,put&#39;</span><span class="p">,</span>
    <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Application\Controller\IndexController&#39;</span><span class="p">,</span>
        <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;form-submit&#39;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</td></tr></table></div>
<p>The above route would match an http &#8220;POST&#8221; or &#8220;PUT&#8221; request and return a <tt class="docutils literal"><span class="pre">RouteMatch</span></tt> object containing a key
&#8220;action&#8221; with a value of &#8220;form-submit&#8221;.</p>
</div>
<div class="section" id="zend-mvc-router-http-part">
<span id="zend-mvc-routing-http-route-types-part"></span><h3>Zend\Mvc\Router\Http\Part<a class="headerlink" href="#zend-mvc-router-http-part" title="Permalink to this headline">Â¶</a></h3>
<p>A <tt class="docutils literal"><span class="pre">Part</span></tt> route allows crafting a tree of possible routes based on segments of the URI path. It actually extends
the <tt class="docutils literal"><span class="pre">TreeRouteStack</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">Part</span></tt> routes are difficult to describe, so we&#8217;ll simply provide a sample one here.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$route</span> <span class="o">=</span> <span class="nx">Part</span><span class="o">::</span><span class="na">factory</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;literal&#39;</span><span class="p">,</span>
        <span class="s1">&#39;options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Application\Controller\IndexController&#39;</span><span class="p">,</span>
                <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">),</span>
    <span class="s1">&#39;route_plugins&#39;</span> <span class="o">=&gt;</span> <span class="nv">$routePlugins</span><span class="p">,</span>
    <span class="s1">&#39;may_terminate&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="s1">&#39;child_routes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;blog&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;literal&#39;</span><span class="p">,</span>
            <span class="s1">&#39;options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/blog&#39;</span><span class="p">,</span>
                <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Application\Controller\BlogController&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">),</span>
            <span class="s1">&#39;may_terminate&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
            <span class="s1">&#39;child_routes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;rss&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;literal&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                        <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/rss&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                            <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;rss&#39;</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="p">),</span>
                    <span class="s1">&#39;may_terminate&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
                    <span class="s1">&#39;child_routes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                        <span class="s1">&#39;subrss&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;literal&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                                <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/sub&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                                    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;subrss&#39;</span><span class="p">,</span>
                                <span class="p">),</span>
                            <span class="p">),</span>
                        <span class="p">),</span>
                    <span class="p">),</span>
                <span class="p">),</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="s1">&#39;forum&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;literal&#39;</span><span class="p">,</span>
            <span class="s1">&#39;options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;forum&#39;</span><span class="p">,</span>
                <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Application\Controller\ForumController&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</td></tr></table></div>
<p>The above would match the following:</p>
<ul class="simple">
<li>&#8220;/&#8221; would load the &#8220;Index&#8221; controller, &#8220;index&#8221; action.</li>
<li>&#8220;/blog&#8221; would load the &#8220;Blog&#8221; controller, &#8220;index&#8221; action.</li>
<li>&#8220;/blog/rss&#8221; would load the &#8220;Blog&#8221; controller, &#8220;rss&#8221; action.</li>
<li>&#8220;/blog/rss/sub&#8221; would load the &#8220;Blog&#8221; controller, &#8220;subrss&#8221; action.</li>
<li>&#8220;/forum&#8221; would load the &#8220;Forum&#8221; controller, &#8220;index&#8221; action.</li>
</ul>
<p>You may use any route type as a child route of a <tt class="docutils literal"><span class="pre">Part</span></tt> route.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">Part</span></tt> routes are not meant to be used directly. When you add definitions for <tt class="docutils literal"><span class="pre">child_routes</span></tt> to any route
type, that route will become a <tt class="docutils literal"><span class="pre">Part</span></tt> route. As already said, describing <tt class="docutils literal"><span class="pre">Part</span></tt> routes with words is
difficult, so hopefully the additional <a class="reference internal" href="#zend-mvc-routing-http-route-types-examples"><em>examples at the end</em></a>
will provide further insight.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In the above example, the <tt class="docutils literal"><span class="pre">$routePlugins</span></tt> is an instance of <tt class="docutils literal"><span class="pre">Zend\Mvc\Router\RoutePluginManager</span></tt>.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$routePlugins</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend\Mvc\Router\RoutePluginManager</span><span class="p">();</span>
<span class="nv">$plugins</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;hostname&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Zend\Mvc\Router\Http\Hostname&#39;</span><span class="p">,</span>
    <span class="s1">&#39;literal&#39;</span>  <span class="o">=&gt;</span> <span class="s1">&#39;Zend\Mvc\Router\Http\Literal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;part&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;Zend\Mvc\Router\Http\Part&#39;</span><span class="p">,</span>
    <span class="s1">&#39;regex&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;Zend\Mvc\Router\Http\Regex&#39;</span><span class="p">,</span>
    <span class="s1">&#39;scheme&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;Zend\Mvc\Router\Http\Scheme&#39;</span><span class="p">,</span>
    <span class="s1">&#39;segment&#39;</span>  <span class="o">=&gt;</span> <span class="s1">&#39;Zend\Mvc\Router\Http\Segment&#39;</span><span class="p">,</span>
    <span class="s1">&#39;wildcard&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Zend\Mvc\Router\Http\Wildcard&#39;</span><span class="p">,</span>
    <span class="s1">&#39;query&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;Zend\Mvc\Router\Http\Query&#39;</span><span class="p">,</span>
    <span class="s1">&#39;method&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;Zend\Mvc\Router\Http\Method&#39;</span><span class="p">,</span>
<span class="p">);</span>
<span class="nv">$foreach</span> <span class="p">(</span><span class="nv">$plugins</span> <span class="k">as</span> <span class="nv">$name</span> <span class="o">=&gt;</span> <span class="nv">$class</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routePlugins</span><span class="o">-&gt;</span><span class="na">setInvokableClass</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$class</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p class="last">When using <tt class="docutils literal"><span class="pre">Zend\Mvc\Router\Http\TreeRouteStack</span></tt>, the <tt class="docutils literal"><span class="pre">RoutePluginManager</span></tt> is set up by default, and the
developer does not need to worry about the autoloading of standard HTTP routes.</p>
</div>
</div>
<div class="section" id="zend-mvc-router-http-regex">
<span id="zend-mvc-routing-http-route-types-regex"></span><h3>Zend\Mvc\Router\Http\Regex<a class="headerlink" href="#zend-mvc-router-http-regex" title="Permalink to this headline">Â¶</a></h3>
<p>A <tt class="docutils literal"><span class="pre">Regex</span></tt> route utilizes a regular expression to match against the URI path. Any valid regular expression is
allowed; our recommendation is to use named captures for any values you want to return in the <tt class="docutils literal"><span class="pre">RouteMatch</span></tt>.</p>
<p>Since regular expression routes are often complex, you must specify a &#8220;spec&#8221; or specification to use when
assembling URLs from regex routes. The spec is simply a string; replacements are identified using &#8220;%keyname%&#8221;
within the string, with the keys coming from either the captured values or named parameters passed to the
<tt class="docutils literal"><span class="pre">assemble()</span></tt> method.</p>
<p>Just like other routes, the <tt class="docutils literal"><span class="pre">Regex</span></tt> route can accept &#8220;defaults&#8221;, parameters to include in the <tt class="docutils literal"><span class="pre">RouteMatch</span></tt> when
successfully matched.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$route</span> <span class="o">=</span> <span class="nx">Regex</span><span class="o">::</span><span class="na">factory</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;regex&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/blog/(?&lt;id&gt;[a-zA-Z0-9_-]+)(\.(?&lt;format&gt;(json|html|xml|rss)))?&#39;</span><span class="p">,</span>
    <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Application\Controller\BlogController&#39;</span><span class="p">,</span>
        <span class="s1">&#39;action&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span>
        <span class="s1">&#39;format&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="s1">&#39;spec&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/blog/%id%.%format%&#39;</span><span class="p">,</span>
<span class="p">));</span>
</pre></div>
</td></tr></table></div>
<p>The above would match &#8220;/blog/001-some-blog_slug-here.html&#8221;, and return four items in the <tt class="docutils literal"><span class="pre">RouteMatch</span></tt>, an &#8220;id&#8221;,
the &#8220;controller&#8221;, the &#8220;action&#8221;, and the &#8220;format&#8221;. When assembling a URL from this route, the &#8220;id&#8221; and &#8220;format&#8221;
values would be used to fill the specification.</p>
</div>
<div class="section" id="zend-mvc-router-http-scheme">
<span id="zend-mvc-routing-http-route-types-scheme"></span><h3>Zend\Mvc\Router\Http\Scheme<a class="headerlink" href="#zend-mvc-router-http-scheme" title="Permalink to this headline">Â¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">Scheme</span></tt> route matches the URI scheme only, and must be an exact match. As such, this route, like the
<tt class="docutils literal"><span class="pre">Literal</span></tt> route, simply takes what you want to match and the &#8220;defaults&#8221;, parameters to return on a match.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$route</span> <span class="o">=</span> <span class="nx">Scheme</span><span class="o">::</span><span class="na">factory</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;scheme&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;https&#39;</span><span class="p">,</span>
    <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;https&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</td></tr></table></div>
<p>The above route would match the &#8220;https&#8221; scheme, and return the key &#8220;https&#8221; in the <tt class="docutils literal"><span class="pre">RouteMatch</span></tt> with a boolean
<tt class="docutils literal"><span class="pre">true</span></tt> value.</p>
</div>
<div class="section" id="zend-mvc-router-http-segment">
<span id="zend-mvc-routing-http-route-types-segment"></span><h3>Zend\Mvc\Router\Http\Segment<a class="headerlink" href="#zend-mvc-router-http-segment" title="Permalink to this headline">Â¶</a></h3>
<p>A <tt class="docutils literal"><span class="pre">Segment</span></tt> route allows matching any segment of a URI path. Segments are denoted using a colon, followed by
alphanumeric characters; if a segment is optional, it should be surrounded by brackets. As an example,
&#8220;/:foo[/:bar]&#8221; would match a &#8220;/&#8221; followed by text and assign it to the key &#8220;foo&#8221;; if any additional &#8220;/&#8221; characters
are found, any text following the last one will be assigned to the key &#8220;bar&#8221;.</p>
<p>The separation between literal and named segments can be anything. For example, the above could be done as
&#8220;/:foo{-}[-:bar] as well. The {-} after the :foo parameter indicates a set of one or more delimiters, after which
matching of the parameter itself ends.</p>
<p>Each segment may have constraints associated with it. Each constraint should simply be a regular expression
expressing the conditions under which that segment should match.</p>
<p>Also, as you can in other routes, you may provide defaults to use; these are particularly useful when using
optional segments.</p>
<p>As a complex example:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$route</span> <span class="o">=</span> <span class="nx">Segment</span><span class="o">::</span><span class="na">factory</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/:controller[/:action]&#39;</span><span class="p">,</span>
    <span class="s1">&#39;constraints&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;[a-zA-Z][a-zA-Z0-9_-]+&#39;</span><span class="p">,</span>
        <span class="s1">&#39;action&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;[a-zA-Z][a-zA-Z0-9_-]+&#39;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Application\Controller\IndexController&#39;</span><span class="p">,</span>
        <span class="s1">&#39;action&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="zend-mvc-router-http-query-deprecated">
<span id="zend-mvc-routing-http-route-types-query"></span><h3>Zend\Mvc\Router\Http\Query (Deprecated)<a class="headerlink" href="#zend-mvc-router-http-query-deprecated" title="Permalink to this headline">Â¶</a></h3>
<p>This route part is deprecated since you can now add query parameters without a query route.</p>
<p>The <tt class="docutils literal"><span class="pre">Query</span></tt> route part allows you to specify and capture query string parameters for a given route.</p>
<p>The intention of the <tt class="docutils literal"><span class="pre">Query</span></tt> part is that you do not instantiate it in its own right but to use it as a child of
another route part.</p>
<p>An example of its usage would be</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$route</span> <span class="o">=</span> <span class="nx">Part</span><span class="o">::</span><span class="na">factory</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;type&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;literal&#39;</span><span class="p">,</span>
        <span class="s1">&#39;options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;route&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;page&#39;</span><span class="p">,</span>
            <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">),</span>
    <span class="s1">&#39;may_terminate&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="s1">&#39;route_plugins&#39;</span> <span class="o">=&gt;</span> <span class="nv">$routePlugins</span><span class="p">,</span>
    <span class="s1">&#39;child_routes&#39;</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;query&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Query&#39;</span><span class="p">,</span>
            <span class="s1">&#39;options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</td></tr></table></div>
<p>As you can see, it&#8217;s pretty straight forward to specify the query part. This then allows you to create query
strings using the url view helper.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">(</span>
    <span class="s1">&#39;page/query&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;name&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;my-test-page&#39;</span><span class="p">,</span>
        <span class="s1">&#39;format&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;rss&#39;</span><span class="p">,</span>
        <span class="s1">&#39;limit&#39;</span>  <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>As you can see above, you must add &#8220;/query&#8221; to your route name in order to append a query string. If you do not
specify &#8220;/query&#8221; in the route name then no query string will be appended.</p>
<p>Our example &#8220;page&#8221; route has only one defined parameter of &#8220;name&#8221; (&#8220;/page[/:name]&#8221;), meaning that the remaining
parameters of &#8220;format&#8221; and &#8220;limit&#8221; will then be appended as a query string.</p>
<p>The output from our example should then be &#8220;/page/my-test-page?format=rss&amp;limit=10&#8221;</p>
</div>
</div>
<div class="section" id="http-routing-examples">
<span id="zend-mvc-routing-http-route-types-examples"></span><h2>HTTP Routing Examples<a class="headerlink" href="#http-routing-examples" title="Permalink to this headline">Â¶</a></h2>
<p>Most of the routing definitions will be done in module configuration files, so the following examples will show
how to set up routes in config files.</p>
<p class="rubric">Simple example with two literal routes</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">return</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;router&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;routes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="c1">// Literal route named &quot;home&quot;</span>
            <span class="s1">&#39;home&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;literal&#39;</span><span class="p">,</span>
                <span class="s1">&#39;options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                        <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Application\Controller\IndexController&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">),</span>
            <span class="p">),</span>
            <span class="c1">// Literal route named &quot;contact&quot;</span>
            <span class="s1">&#39;contact&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;literal&#39;</span><span class="p">,</span>
                <span class="s1">&#39;options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;contact&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                        <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Application\Controller\ContactController&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;form&#39;</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">),</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p class="rubric">A complex example with child routes</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">return</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;router&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;routes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="c1">// Literal route named &quot;home&quot;</span>
            <span class="s1">&#39;home&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;literal&#39;</span><span class="p">,</span>
                <span class="s1">&#39;options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                        <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Application\Controller\IndexController&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">),</span>
            <span class="p">),</span>
            <span class="c1">// Literal route named &quot;blog&quot;, with child routes</span>
            <span class="s1">&#39;blog&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;literal&#39;</span><span class="p">,</span>
                <span class="s1">&#39;options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/blog&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                        <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Application\Controller\BlogController&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">),</span>
                <span class="s1">&#39;may_terminate&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
                <span class="s1">&#39;child_routes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="c1">// Segment route for viewing one blog post</span>
                    <span class="s1">&#39;post&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                        <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;segment&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                            <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/[:slug]&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;constraints&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                                <span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;[a-zA-Z0-9_-]+&#39;</span><span class="p">,</span>
                            <span class="p">),</span>
                            <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                                <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span>
                            <span class="p">),</span>
                        <span class="p">),</span>
                    <span class="p">),</span>
                    <span class="c1">// Literal route for viewing blog RSS feed</span>
                    <span class="s1">&#39;rss&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                        <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;literal&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                            <span class="s1">&#39;route&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/rss&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;defaults&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                                <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;rss&#39;</span><span class="p">,</span>
                            <span class="p">),</span>
                        <span class="p">),</span>
                    <span class="p">),</span>
                <span class="p">),</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>When using child routes, naming of the routes follows the <tt class="docutils literal"><span class="pre">parent/child</span></tt> pattern, so to use the child routes
from the above example:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">);</span> <span class="c1">// gives &quot;/blog&quot;</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">(</span><span class="s1">&#39;blog/post&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my-post&#39;</span><span class="p">));</span> <span class="c1">// gives &quot;/blog/my-post&quot;</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">(</span><span class="s1">&#39;blog/rss&#39;</span><span class="p">);</span> <span class="c1">// gives &quot;/blog/rss&quot;</span>
</pre></div>
</td></tr></table></div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When defining child routes pay attention that the <tt class="docutils literal"><span class="pre">may_terminate</span></tt> and <tt class="docutils literal"><span class="pre">child_routes</span></tt> definitions
are in same level as the <tt class="docutils literal"><span class="pre">options</span></tt> and <tt class="docutils literal"><span class="pre">type</span></tt> definitions. A common pitfall is to have those two
definitions nested in <tt class="docutils literal"><span class="pre">options</span></tt>, which will not result in the desired routes.</p>
</div>
</div>
<div class="section" id="console-route-types">
<span id="zend-mvc-routing-console-route-types"></span><h2>Console Route Types<a class="headerlink" href="#console-route-types" title="Permalink to this headline">Â¶</a></h2>
<p>Zend Framework 2.0 also comes with routes for writing Console based applications, which is explained in the
<a class="reference internal" href="zend.console.routes.html#zend-console-routes"><em>Console routes and routing</em></a> section.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/zf2_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Routing</a><ul>
<li><a class="reference internal" href="#router-types">Router Types</a><ul>
<li><a class="reference internal" href="#simpleroutestack">SimpleRouteStack</a></li>
<li><a class="reference internal" href="#treeroutestack">TreeRouteStack</a></li>
</ul>
</li>
<li><a class="reference internal" href="#http-route-types">HTTP Route Types</a><ul>
<li><a class="reference internal" href="#zend-mvc-router-http-hostname">Zend\Mvc\Router\Http\Hostname</a></li>
<li><a class="reference internal" href="#zend-mvc-router-http-literal">Zend\Mvc\Router\Http\Literal</a></li>
<li><a class="reference internal" href="#zend-mvc-router-http-method">Zend\Mvc\Router\Http\Method</a></li>
<li><a class="reference internal" href="#zend-mvc-router-http-part">Zend\Mvc\Router\Http\Part</a></li>
<li><a class="reference internal" href="#zend-mvc-router-http-regex">Zend\Mvc\Router\Http\Regex</a></li>
<li><a class="reference internal" href="#zend-mvc-router-http-scheme">Zend\Mvc\Router\Http\Scheme</a></li>
<li><a class="reference internal" href="#zend-mvc-router-http-segment">Zend\Mvc\Router\Http\Segment</a></li>
<li><a class="reference internal" href="#zend-mvc-router-http-query-deprecated">Zend\Mvc\Router\Http\Query (Deprecated)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#http-routing-examples">HTTP Routing Examples</a></li>
<li><a class="reference internal" href="#console-route-types">Console Route Types</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="zend.mvc.services.html"
                        title="previous chapter">Default Services</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="zend.mvc.mvc-event.html"
                        title="next chapter">The MvcEvent</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li>
        <!--<a href="../_sources/modules/zend.mvc.routing.txt"-->
        <a href="https://github.com/zendframework/zf2-documentation/blob/master/docs/languages/en/modules/zend.mvc.routing.rst"
           rel="nofollow">Show Source</a></li>
    <li><a href="https://github.com/zendframework/zf2-documentation/edit/master/docs/languages/en/modules/zend.mvc.routing.rst"
           rel="nofollow">Edit Source</a>
    </li>
  </ul>
        <p style="font-size: 12px">
            Note: You need to stay logged into your <a href="http://www.github.com">GitHub account</a> to contribute to the documentation.
        </p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="zend.mvc.mvc-event.html" title="The MvcEvent"
             >next</a> |</li>
        <li class="right" >
          <a href="zend.mvc.services.html" title="Default Services"
             >previous</a> |</li>
        <li><a href="../index.html">Zend Framework 2 2.3.0dev documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2013, Zend Technologies Ltd..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b3.
    </div>
<div id="edit-button">
    <img src="../_static/edit.gif" alt="Edit this document" title="Edit this document" onclick="javascript:$('#editor-trap').toggle();">
</div>
     
<div id="editor-trap">
    <h3>Edit this document</h3>

    <p>
        The source code of this file is hosted on GitHub. Everyone can
        update and fix errors in this document with few clicks -
        no downloads needed.
    <p>

    <ol>

        <li>
            Login with your <a href="http://www.github.com">GitHub</a> account.
        </li>

        <li>
            Go to
            <a href="https://github.com/zendframework/zf2-documentation/edit/master/docs/languages/en/modules/zend.mvc.routing.rst">
                Routing
            </a> on GitHub.
        </li>

        <li>
            Edit file contents using GitHub's text editor in your web browser
        </li>

        <li>
            Fill in the <b>Commit message</b> text box at the end of the page telling <i>why</i>
            you did the changes. Press <b>Propose file change</b> button next to it when done.
        </li>


        <li>
            On <i>Send a pull request</i> page you don't need to fill in text anymore. Just
            press <b>Send pull request</b> button.
        </li>

        <li>
            Your changes are now queued for review under project's <a href="https://github.com/zendframework/zf2-documentation/pulls">Pull requests</a> tab on GitHub.
        </li>
    </ol>

</div>


  </body>
</html>